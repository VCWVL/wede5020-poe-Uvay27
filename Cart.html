<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO TITLE AND META TAGS -->
    <title>Shopping Cart | Checkpoint Gaming | Review Items & Checkout</title>
    <meta name="description" content="Review your selected gaming products in the Checkpoint Gaming shopping cart. Manage quantities, remove items and proceed to secure checkout.">
    <meta name="keywords" content="shopping cart, checkout, gaming products, purchase, buy games, South Africa">
    <meta name="author" content="Checkpoint Gaming">
    
    <link rel="stylesheet" href="css/style.css">
    <script src="js/script.js" defer></script>
    <style>
        /* CART TABLE STYLING */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        th, td {
            border: 1px solid #444;
            padding: 15px;
            text-align: center;
        }
        th {
            background-color: #2a2a2a;
        }
        td {
            background-color: #1a1a1a;
        }
        
        /* TOTAL PRICE DISPLAY */
        .cart-total {
            margin-top: 20px;
            font-size: 1.3rem;
            font-weight: bold;
            text-align: right;
            padding: 15px;
            background: #2a2a2a;
            border-radius: 5px;
        }
        
        /* CART FUNCTIONALITY BUTTONS */
        .quantity-input {
            width: 60px;
            padding: 5px;
            text-align: center;
            background: #2a2a2a;
            border: 1px solid #444;
            color: white;
            border-radius: 3px;
        }
        .remove-btn {
            background: #ff4444;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .remove-btn:hover {
            background: #cc0000;
        }
        .checkout-btn {
            background: #00bfff;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 5px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            width: 100%;
            transition: background-color 0.3s;
        }
        .checkout-btn:hover {
            background: #ff6600;
        }
        
        /* EMPTY CART STYLING */
        .empty-cart {
            text-align: center;
            padding: 40px;
            color: #888;
        }
        .continue-shopping {
            text-align: center;
            margin: 20px 0;
        }
        .continue-shopping a {
            color: #00bfff;
            text-decoration: none;
            font-weight: bold;
        }
        .continue-shopping a:hover {
            color: #ff6600;
        }
    </style>
</head>
<body>
    <header>
        <h1>Checkpoint Gaming</h1>
        <nav>
            <a href="index.html">Home</a>
            <a href="about.html">About</a>
            <a href="products.html">Products</a>
            <a href="enquiry.html">Enquiry</a>
            <a href="cart.html">Cart</a>
            <a href="contact.html">Contact</a>
        </nav>
    </header>

    <main>
        <h2>Your Shopping Cart</h2>
        <p>Review your selected items below. Ready to game on?</p>

        <!-- CART TABLE -->
        <table id="cartTable">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Total</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="cartItems">
                <!-- CART ITEMS WILL BE ADDED HERE BY JAVASCRIPT -->
                <tr>
                    <td colspan="5" class="empty-cart">Your cart is empty. <a href="products.html">Start shopping!</a></td>
                </tr>
            </tbody>
        </table>

        <!-- TOTAL PRICE DISPLAY -->
        <div class="cart-total" id="cartTotal">
            Total: R0.00
        </div>

        <!-- CONTINUE SHOPPING LINK -->
        <div class="continue-shopping">
            <a href="products.html">‚Üê Continue Shopping</a>
        </div>

        <!-- CHECKOUT BUTTON -->
        <button class="checkout-btn" onclick="checkout()" style="display:none;" id="checkoutBtn">
            Proceed to Checkout
        </button>
    </main>

    <footer>
        <p>&copy; 2025 Checkpoint Gaming</p>
        <p id="date"></p>
    </footer>

    <script>
        // CART FUNCTIONALITY USING LOCALSTORAGE
        document.addEventListener('DOMContentLoaded', function() {
            updateCartDisplay();
        });
        
        // UPDATE CART DISPLAY FUNCTION
        function updateCartDisplay() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const cartTable = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            const checkoutBtn = document.getElementById('checkoutBtn');
            
            // CHECK IF CART IS EMPTY
            if (cart.length === 0) {
                cartTable.innerHTML = '<tr><td colspan="5" class="empty-cart">Your cart is empty. <a href="products.html" style="color:#00bfff;">Start shopping!</a></td></tr>';
                cartTotal.textContent = 'Total: R0.00';
                checkoutBtn.style.display = 'none';
                return;
            }
            
            // BUILD CART TABLE
            let tableHTML = '';
            let grandTotal = 0;
            
            // LOOP THROUGH EACH ITEM IN CART
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                grandTotal += itemTotal;
                
                tableHTML += `
                    <tr>
                        <td>${item.name}</td>
                        <td>R${item.price.toLocaleString()}</td>
                        <td>
                            <input type="number" class="quantity-input" value="${item.quantity}" min="1" 
                                   onchange="updateQuantity(${index}, this.value)">
                        </td>
                        <td>R${itemTotal.toLocaleString()}</td>
                        <td>
                            <button class="remove-btn" onclick="removeFromCart(${index})">Remove</button>
                        </td>
                    </tr>
                `;
            });
            
            // UPDATE TABLE AND TOTAL
            cartTable.innerHTML = tableHTML;
            cartTotal.textContent = `Total: R${grandTotal.toLocaleString()}`;
            checkoutBtn.style.display = 'block';
        }
        
        // UPDATE ITEM QUANTITY FUNCTION
        function updateQuantity(index, newQuantity) {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (cart[index]) {
                cart[index].quantity = parseInt(newQuantity);
                localStorage.setItem('cart', JSON.stringify(cart));
                updateCartDisplay();
            }
        }
        
        // REMOVE ITEM FROM CART FUNCTION
        function removeFromCart(index) {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            cart.splice(index, 1);
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartDisplay();
        }
        
        // CHECKOUT FUNCTION
        function checkout() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            if (cart.length === 0) {
                alert('Your cart is empty!');
                return;
            }
            
            // SIMULATE CHECKOUT PROCESS
            alert('Thank you for your order! This is a demo - in a real application, you would proceed to payment.');
            
            // CLEAR CART AFTER SUCCESSFUL CHECKOUT
            localStorage.removeItem('cart');
            updateCartDisplay();
        }
    </script>
</body>
</html>